var HLS={raf:null,sceneStart:0,sceneProgress:0,modelsParams:null,sceneId:null,defaultScene:"exaland",shotFlora:!0,tempColor:0,color:new THREE.Vector3,lumi:0,landColorChange:!1,initScenes:{},scenes:{},scenesAddons:{},loadParams:function(a){void 0!==a.speed&&(HLE.BASE_MOVE_SPEED=STATUS.VR||STATUS.CARDBOARD?1*a.speed:a.speed);HL.cameraGroup.position.y=void 0!==a.cameraPositionY?a.cameraPositionY:50;HL.cameraGroup.updateMatrix();HL.cameraGroup.updateMatrixWorld();HL.sea.position.y=void 0!==a.seaLevel?
a.seaLevel:0;null!==HL.scene.fog&&(HL.scene.fog.density=void 0!==a.fogDeensity?a.fogDensity:1.5E-4);HLS.modelsParams=void 0!==a.modelsParams?a.modelsParams:null;void 0!==a.tiles&&(HL.land.geometry=new THREE.PlaneBufferGeometry(HLE.WORLD_WIDTH,HLE.WORLD_WIDTH,a.tiles,a.tiles),HL.land.geometry.rotateX(-Math.PI/2),HL.land.material.uniforms.worldModuleWidth.value=HLE.WORLD_WIDTH/a.tiles);void 0!==a.repeatUV&&(HL.land.material.uniforms.repeatUV.value=new THREE.Vector2(a.repeatUV,a.repeatUV));void 0!==
a.bFactor&&(HL.land.material.uniforms.bFactor.value=a.bFactor);void 0!==a.cFactor&&(HL.land.material.uniforms.cFactor.value=a.cFactor);void 0!==a.landSeed?HL.land.material.uniforms.landSeed.value=a.landSeed:HL.land.material.uniforms.landSeed=1E3;void 0!==a.map&&(HL.land.material.uniforms.map.value=HL.textures[a.map]);void 0!==a.map2&&(HL.land.material.uniforms.map2.value=HL.textures[a.map2]);void 0!==a.mapSand&&(HL.land.material.uniforms.mapSand.value=HL.textures[a.mapSand]);void 0!==a.natural&&(HL.land.material.uniforms.natural.value=
a.natural);void 0!==a.rainbow&&(HL.land.material.uniforms.rainbow.value=a.rainbow);void 0!==a.squareness&&(HL.land.material.uniforms.squareness.value=a.squareness);void 0!==a.landRGB&&HLC.land.set(a.landRGB);void 0!==a.horizonRGB&&(HLC.horizon.set(a.horizonRGB),HLC.tempHorizon.set(a.horizonRGB));void 0!==a.skyMap&&(HL.materials.sky.map=HL.textures[a.skyMap]);void 0!==a.landColorChange&&(HLS.landColorChange=a.landColorChange);void 0!==a.centerPath&&(HL.materials.land.uniforms.withCenterPath.value=
HLE.CENTER_PATH=a.centerPath);HL.cameraCompanion.material.map=HL.dynamicTextures.textbox.texture;HL.cameraCompanion.material.needsUpdate=!0},startScene:function(a){HLS.sceneId=a;STATUS.VR?HL.VREffect.cancelAnimationFrame(HLS.raf):window.cancelAnimationFrame(HLS.raf);HLE.acceleration=HLE.reactiveMoveSpeed=HLE.moveSpeed=0;void 0!==HLSP[a]&&HLS.loadParams(HLSP[a]);null!==HL.scene.fog&&(HL.scene.fog.density=2.5E-4);HLH.destroyAllModels();HL.cameraGroup.rotation.x=0;HL.cameraGroup.rotation.y=0;HL.cameraGroup.rotation.z=
0;HL.cameraCompanion.visible=!1;if(void 0!==HLS.initScenes[a])HLS.initScenes[a]();HLS.sceneStart=frameCount;HLS.raf=STATUS.VR?HL.VREffect.requestAnimationFrame(HLS.scenes[a]||HLS.scenes.standard):window.requestAnimationFrame(HLS.scenes[a]||HLS.scenes.standard)}};
HLS.scenes.standard=function(){HLS.raf=STATUS.VR?HL.VREffect.requestAnimationFrame(HLS.scenes.standard):window.requestAnimationFrame(HLS.scenes.standard);HLE.reactiveMoveSpeed=HLE.BASE_MOVE_SPEED+(HLR.smoothFft[0]+HLR.smoothFft[1]+60*HLR.smoothFft[2])*HLE.BASE_MOVE_SPEED;HLE.moveSpeed=HLE.reactiveMoveSpeed*(STATUS.CARDBOARD||STATUS.VR?.75:1);HLE.moveSpeed+=HLE.MAX_MOVE_SPEED*HLE.acceleration;HLR.tempNoiseFreq=7-3*HLR.fft[2];HLE.noiseFrequency=HLR.tempNoiseFreq;HLE.noiseFrequency2+=.3*Math.min(0,HLR.fft[1]-
HLR.fft[2]);HLS.lumi=5*HLR.fft[2];HLC.horizon.setRGB(HLC.tempHorizon.r+HLS.lumi,HLC.tempHorizon.g+HLS.lumi,HLC.tempHorizon.b+HLS.lumi);if(HLS.scenesAddons[HLS.sceneId])HLS.scenesAddons[HLS.sceneId]()};HLS.initScenes.exaland=function(){console.log(" exaland scene init")};var randomDebounce1=!0,randomDebounce2=!0;function isRegisteredKick(){return!1}var elephantDebounce=!0;
HLS.scenesAddons.exaland=function(){HL.land.material.uniforms.landSeed.value+=1E-4*HLR.fft[0];.985<HLR.fft[0]?randomDebounce1&&(HLR.randomizeTrigger&&HLS.randomizeLand(),HLR.objectsTrigger&&(.5>Math.random()&&HLH.startGroup(["everything",1,0,!1,!1,-5,!0]),.005>Math.random()&&HLH.startGroup(["everything",20,1,!1,!0,0,!0])),randomDebounce1=!1):randomDebounce1=!0;.42<HLR.fft[2]&&HLR.objectsTrigger&&(HLH.startGroup(["space",1,40,!0,!1,HLE.WORLD_HEIGHT/3,!1]),.5>Math.random()&&HLH.startGroup(["everything",
1,0,"xyz",!0,-1,!0]));HL.sky.visible=.5<HLR.fft[1]?!1:!0;HLR.textTrigger&&(.9<HLR.fft[0]?(0==HL.cameraCompanion.visible&&HLS.textGlitchTexture(),HL.cameraCompanion.visible=!0):HL.cameraCompanion.visible=!1);HLS.lumi=Math.min(HLR.fft[2]+.2*HLR.fft[0],1);HLC.horizon.setRGB(HLC.tempHorizon.r+HLS.lumi,HLC.tempHorizon.g+HLS.lumi,HLC.tempHorizon.b+HLS.lumi);1==HLR.glitchEffect&&void 0!==HL.glitchPlane.material.materialShader&&(HL.glitchPlane.material.materialShader.uniforms.iTime.value+=.1,HL.glitchPlane.material.materialShader.uniforms.amount.value=
.15*HLR.fft[2])};function pickRandomPropertyHL(a){for(var b in window)if("HL"==b.substr(0,2)&&.1>Math.random()&&"HL"!=b)break;return window.result}var cartello;
HLS.textGlitchTexture=function(){var a=pickRandomPropertyHL();try{cartello=JSON.stringify(a),cartello=cartello.split(",")}catch(c){for(cartello=[],a=0;50>a;a++)cartello.push(16777215*Math.random())}a=16+64*Math.random();HL.dynamicTextures.textbox.c.clearRect(0,0,HL.dynamicTextures.textbox.width,HL.dynamicTextures.textbox.height);HL.dynamicTextures.textbox.c.font=a+"px 'Space Mono'";HL.dynamicTextures.textbox.c.fillStyle="white";for(var b=Math.floor(Math.random()*cartello.length);b<cartello.length;b++)HL.dynamicTextures.textbox.c.fillText(cartello[b],
20,10+1.2*a*b);HL.dynamicTextures.textbox.texture.needsUpdate=!0};
HLS.randomizeLand=function(){var a=2+Math.round(6*Math.random());HL.land.material.uniforms.repeatUV.value=new THREE.Vector2(a,a);HL.land.material.uniforms.bFactor.value=Math.random();HL.land.material.uniforms.cFactor.value=Math.random();HL.land.material.uniforms.landSeed.value=100*Math.random();null!==HL.stereoEffect&&(HL.stereoEffect=new THREE.StereoEffect(HL.renderer),HL.stereoEffect.setSize(window.innerWidth,window.innerHeight));.3>Math.random()?(HL.land.material.uniforms.map.value=HL.dynamicTextures.textbox.texture,
HL.land.material.uniforms.map2.value=HL.dynamicTextures.textbox.texture):(HL.land.material.uniforms.map.value=HL.textures[.5<Math.random()?"land"+(1+Math.round(4*Math.random())):"white"],HL.land.material.uniforms.map2.value=HL.textures["land"+(1+Math.round(4*Math.random()))]);HL.land.material.uniforms.natural.value=.5+.5*Math.random();HL.land.material.uniforms.rainbow.value=Math.random();HL.land.material.uniforms.glowing.value=Math.round(1.1*Math.random());HL.land.material.uniforms.squareness.value=
.05*Math.random();HL.sky.material.uniforms.mixFactor.value=Math.random();HL.sky.geometry.rotateY(Math.random()*Math.PI);HLC.land.set(HLC.palette.getRandom());HLC.horizon.set(HLC.palette.getRandom());HLC.tempHorizon.set(HLC.horizon);HLC.sea.set(.5*HLC.palette.getRandom())};
window.addEventListener("HLEload",function(){function a(a){a.targetTouches?(c.x=a.targetTouches[0].clientX,c.y=a.targetTouches[0].clientY):(c.x=a.clientX,c.y=a.clientY);c.x=c.x/window.innerWidth*2-1;c.y=2*-(c.y/window.innerHeight)+1;b.setFromCamera(c,HL.camera);a=b.intersectObjects(HL.scene.children);if(void 0!==a[0]&&void 0!==a[0].object.key){var d,f=HL.models,g=0,e;for(e in f)Math.random()<1/++g&&(d=e);a[0].object.geometry=HL.models[d].geometry;a[0].object.material=HL.models[d].material}}HLS.startScene(HLS.defaultScene);
var b=new THREE.Raycaster,c=new THREE.Vector2;window.addEventListener("click",a,!1);window.addEventListener("touchstart",a,!1)});
