var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
var HLR={fft:[0,0,0],smoothFft:[0,0,0],randomizeTrigger:!1,textTrigger:!1,objectsTrigger:!1,glitchEffect:!1,GAMESTATUS:0,PREVGAMESTATUS:null,MIDIInterface:new MIDIInterface,socketInterface:STATUS.NOSOCKET?null:new socketInterface(SOCKETSERVER),SOCKET_STREAMS_PER_SECOND:15,registerAssign:function(a){STATUS.ISVISUAL&&(window.addEventListener("keyup",function(b){b.key==a.keyAlternative&&(a.parent[a.property]=a.isTrigger?!a.parent[a.property]:a.value,STATUS.ISVISUAL&&!STATUS.NOSOCKET&&HLR.socketInterface.emitAssign(a))}),
void 0===a.callbacks&&(a.callbacks=[{func:a.callback,ctx:a.context,isTrigger:a.isTrigger}]),STATUS.NOSOCKET||a.callbacks.push({func:function(){HLR.socketInterface.emitAssign(a)},ctx:HLR,isTrigger:a.isTrigger}),HLR.MIDIInterface.registerCallback(a));STATUS.ISVISUAL||STATUS.NOSOCKET||HLR.socketInterface.registerReceivedAssign(a)},registerCallback:function(a){void 0!==a.callback&&void 0!==a.context||console.error("HLR.registerCallback error: you must provide a callback and a context");void 0===a.callbacks&&
(a.callbacks=[{func:a.callback,ctx:a.context,isTrigger:a.isTrigger}]);HLR.MIDIInterface.registerCallback(a);void 0!==a.keyAlternative&&window.addEventListener("keyup",function(b){if(b.key==a.keyAlternative){b=$jscomp.makeIterator(a.callbacks);for(var c=b.next();!c.done;c=b.next())c=c.value,c.func.call(c.ctx)}})},init:function(){HLR.registerAssign({midi:[1,41],isTrigger:!0,keyAlternative:"e",property:"randomizeTrigger",parent:HLR,value:null,permanent:!0,callback:function(a){HLR.randomizeTrigger=!HLR.randomizeTrigger;
console.log("HLR.randomizeTrigger",HLR.randomizeTrigger)},context:HLR});STATUS.ISVISUAL&&!STATUS.NOSOCKET&&HLR.socketInterface.emitResetAssign("e",!1);HLR.registerAssign({midi:[1,40],isTrigger:!0,keyAlternative:"w",property:"objectsTrigger",parent:HLR,value:null,permanent:!0,callback:function(a){HLR.objectsTrigger=!HLR.objectsTrigger;console.log("HLR.objectsTrigger",HLR.objectsTrigger)},context:HLR});STATUS.ISVISUAL&&!STATUS.NOSOCKET&&HLR.socketInterface.emitResetAssign("w",!1);HLR.registerAssign({midi:[1,
39],isTrigger:!0,keyAlternative:"q",property:"textTrigger",parent:HLR,value:null,permanent:!0,callback:function(a){HLR.textTrigger=!HLR.textTrigger;console.log("HLR.textTrigger",HLR.textTrigger)},context:HLR});STATUS.ISVISUAL&&!STATUS.NOSOCKET&&HLR.socketInterface.emitResetAssign("q",!1);HLR.registerAssign({midi:[1,37],isTrigger:!0,keyAlternative:"g",property:"glitchEffect",parent:HLR,value:null,permanent:!0,callback:function(a){HLR.glitchEffect=!HLR.glitchEffect;console.log("HLR.glitchEffect",HLR.glitchEffect)},
context:HLR});STATUS.ISVISUAL&&!STATUS.NOSOCKET&&HLR.socketInterface.emitResetAssign("g",!1);HLR.registerCallback({midi:[1,36],callback:function(a){HLS.loadParams(HLSP.exaland)},context:HLS,isTrigger:!0,keyAlternative:"r"});if(!STATUS.ISVISUAL&&!STATUS.NOSOCKET)HLR.socketInterface.socket.on("s_stream",function(a){HLRemote.updateFFT(a)});if(STATUS.ISVISUAL&&!STATUS.NOSOCKET){var a=function(){window.setTimeout(function(){window.requestAnimationFrame(a)},1E3/HLR.SOCKET_STREAMS_PER_SECOND);try{HLR.socketInterface.emit("stream",
[AA.getFreq(2),AA.getFreq(0),AA.getFreq(200)])}catch(b){}};a()}STATUS.NOSOCKET||HLR.socketInterface.emitReady()}},HLRemote=function(){function a(){requestAnimationFrame(a);if(STATUS.ISVISUAL)try{b([AA.getFreq(2),AA.getFreq(0),AA.getFreq(200)])}catch(g){}for(var d=0;d<HLR.fft.length;d++)HLR.fft[d]*=.99}function b(a){for(var d=0;d<a.length;d++)HLR.fft[d]=Math.max(a[d],1.11E-4),HLR.smoothFft[d]+=.04*(HLR.fft[d]-HLR.smoothFft[d])}function c(a){if(" "==a.key||32==a.keyCode||"mP"==a.key||"mP2"==a.key)a.preventDefault(),
0<HLR.GAMESTATUS&&20>HLR.GAMESTATUS?HLMain.updateStatus(20):20==HLR.GAMESTATUS&&HLMain.updateStatus(-1);0<HLR.GAMESTATUS&&20>HLR.GAMESTATUS&&("a"!=a.key&&"A"!=a.key||HLH.startGroup(["sea",2,0,"y",!0,0,!0]),"s"!=a.key&&"S"!=a.key||HLH.startGroup(["bigfishes",2,0,null,!1,0,!0]),"d"!=a.key&&"D"!=a.key||HLH.startGroup(["waste",2,1,"xyz",!1,HLE.WORLD_HEIGHT,!0]),"f"!=a.key&&"F"!=a.key&&69!=a.keyCode||HLH.startGroup(["civilization",2,0,null,!0,0,!0]),"d"!=a.key&&"D"!=a.key||HLH.startModel(HL.models.trex,
THREE.Math.randInt(-1E3,1E3),-5,0,null,10,!1,!0),"c"!=a.key&&"C"!=a.key||HLH.startModel(HL.models.chainsaw,THREE.Math.randInt(-1E3,1E3),-1,0,"xyz",5,!1,!0))}requestAnimationFrame(a);STATUS.CARDBOARD||window.addEventListener("keyup",c);return{updateHLParams:function(a,c,e,f){b(a,c,e,f)},updateFFT:b}}();
